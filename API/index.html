<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Benno111 Chat</title><script type=module>const a={apiKey:"AIzaSyDrizdZiiCBjdr3SRvVXfg0rQNHqMkIyXc",authDomain:"benno111chat.firebaseapp.com",projectId:"benno111chat",storageBucket:"benno111chat.firebasestorage.app",messagingSenderId:"1074654415299",appId:"1:1074654415299:web:9862174377eabc53bd9576"};import{initializeApp as b}from"";import{getFirestore as c,collection as d,addDoc as e,onSnapshot as f,query as g,orderBy as h,serverTimestamp as i}from"";import{getAuth as j,signInWithEmailAndPassword as k,createUserWithEmailAndPassword as l,onAuthStateChanged as m,signOut as n}from"";const o=b(a),p=c(o),q=j(o);const r=document.getElementById("messages"),s=document.getElementById("messageInput"),t=document.getElementById("sendBtn"),u=document.getElementById("loginBtn"),v=document.getElementById("registerBtn"),w=document.getElementById("logoutBtn"),x=document.getElementById("userInfo"),y=document.getElementById("error"),z=document.getElementById("chatContainer");let A=null;async function B(C,D){try{await k(q,C,D),y.textContent=""}catch(E){y.textContent=E.message}}async function F(C,D){try{await l(q,C,D),y.textContent=""}catch(E){y.textContent=E.message}}u.addEventListener("click",(E)=>{E.preventDefault();const C=document.getElementById("email").value,D=document.getElementById("password").value;B(C,D)});v.addEventListener("click",(E)=>{E.preventDefault();const C=document.getElementById("email").value,D=document.getElementById("password").value;F(C,D)});w.addEventListener("click",async()=>{await n(q)});function G(C){const D=/(https?:\/\/[^\s]+)/g;return C.replace(D,(E)=>{if(E.match(/\.(jpeg|jpg|gif|png)$/)){return`<img src="${E}" style="max-width:100%;max-height:200px;">`}else if(E.includes("youtube.com")||E.includes("youtu.be")){const F=E.includes("youtu.be")?E.split("/").pop():new URL(E).searchParams.get("v");return`<iframe width="300" height="200" src="https://www.youtube.com/embed/${F}" frameborder="0" allowfullscreen></iframe>`}else{return`<a href="${E}" target="_blank">${E}</a>`}})}m(q,(C)=>{const D="firstLoginDone";const E=!localStorage.getItem(D);A=C;if(C){x.textContent=`Logged in as ${C.email}`,document.getElementById("loginForm").style.display="none",w.style.display="inline-block",s.disabled=!1,t.disabled=!1,z.style.display="block";if(E){localStorage.setItem(D,"true"),location.reload()}}else{x.textContent="Not logged in",document.getElementById("loginForm").style.display="block",w.style.display="none",s.disabled=!0,t.disabled=!0,z.style.display="none"}});const H=g(d(o,"messages"),h("timestamp"));f(H,(C)=>{r.innerHTML="";C.forEach((D)=>{const E=D.data();const F=document.createElement("div");F.innerHTML='<strong>'+E.username+':</strong> '+G(E.text),r.appendChild(F)});r.scrollTop=r.scrollHeight});t.addEventListener("click",async()=>{const C=s.value.trim();if(!C||!A)return;try{await e(d(o,"messages"),{text:C,timestamp:i(),username:A.email}),s.value=""}catch(E){console.error("Error sending message:",E)}});</script><style>body{font-family:sans-serif;max-width:600px;margin:auto;padding:20px;}#messages{border:1px solid #ccc;padding:10px;height:400px;overflow-y:scroll;margin-bottom:10px;background-color:#f5f5f5;}#inputContainer{display:flex;gap:10px;}input{flex:1;padding:8px;}button{padding:8px 16px;}#authControls{margin-bottom:10px;}#userInfo{margin-bottom:5px;font-weight:bold;}form{display:flex;flex-direction:column;gap:10px;margin-bottom:10px;}#error{color:red;font-size:.9em;margin-bottom:10px;}.form-buttons{display:flex;gap:10px;}@media (max-width:600px){body{padding:10px;max-width:100%;}#messages{height:250px;font-size:14px;}#inputContainer{flex-direction:column;gap:5px;}input,button{width:100%;font-size:16px;}button{padding:10px;}h1{font-size:1.5em;text-align:center;}}</style></head><body><h1>Benno111 Chat</h1><div id=authControls><div id=userInfo>Not logged in</div><form id=loginForm><input type=email id=email placeholder=Email required><input type=password id=password placeholder=Password required><div class=form-buttons><button id=loginBtn>Login</button><button id=registerBtn>Register</button></div></form><div id=error></div><button id=logoutBtn style=display:none>Logout</button></div><div id=chatContainer><div id=messages></div><div id=inputContainer><input type=text id=messageInput placeholder="Type a message..." disabled><button id=sendBtn disabled>Send</button></div></div></body></html>
